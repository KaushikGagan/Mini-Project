<!DOCTYPE html>
<html>
<head>
<title>SecurePay Bank</title>

<style>
body{
 margin:0;
 background:#0f172a;
 font-family:Segoe UI;
 color:white;
}

/* Header */
.header{
 background:#1e293b;
 padding:15px;
 text-align:center;
 font-size:22px;
 font-weight:bold;
 letter-spacing:1px;
}

/* Main Container */
.main{
 display:flex;
 justify-content:center;
 align-items:center;
 height:85vh;
}

.container{
 width:420px;
 background:#1e293b;
 padding:30px;
 border-radius:12px;
 box-shadow:0 0 20px rgba(0,0,0,0.4);
}

/* Inputs */
input,button{
 width:100%;
 padding:12px;
 margin:10px 0;
 border:none;
 border-radius:6px;
 font-size:14px;
}

input{
 background:#334155;
 color:white;
}

button{
 background:#3b82f6;
 color:white;
 cursor:pointer;
 transition:0.3s;
}

button:hover{
 background:#2563eb;
}

/* Messages */
.error{
 color:#f87171;
 font-size:13px;
 margin-top:5px;
}

.success{
 color:#4ade80;
}

/* Password eye */
.eye{
 position:relative;
}
.eye span{
 position:absolute;
 right:12px;
 top:14px;
 cursor:pointer;
}

/* Footer */
.footer{
 text-align:center;
 padding:10px;
 background:#1e293b;
 font-size:12px;
 color:#94a3b8;
}
</style>

<script>
function togglePass(id){
 let x=document.getElementById(id);
 x.type=(x.type==="password")?"text":"password";
}
</script>

</head>
<body>

<div class="header">
SecurePay Digital Banking
</div>

<div class="main">
<div class="container">

{% if page=="login" %}
<h2>Login</h2>

<form method="POST">
<input name="username" placeholder="Username" required>

<div class="eye">
<input id="pass1" type="password" name="password" placeholder="Password" required>
<span onclick="togglePass('pass1')">üëÅ</span>
</div>

<button type="submit">Login</button>
</form>

<div class="error">{{ error or "" }}</div>
<a href="/signup_page" style="color:#93c5fd;">Create account</a>
{% endif %}


{% if page=="signup" %}
<h2>Create Account</h2>

<form method="POST" action="/signup">

<input name="username" placeholder="Username" required>

<div class="eye">
<input id="pass2" type="password" name="password" placeholder="Login Password" required>
<span onclick="togglePass('pass2')">üëÅ</span>
</div>

<div class="eye">
<input id="pass3" type="password" name="txnpass" placeholder="Transaction Password" required>
<span onclick="togglePass('pass3')">üëÅ</span>
</div>

<button type="submit">Register</button>
</form>

<a href="/" style="color:#93c5fd;">Back to Login</a>
{% endif %}


{% if page=="payment" %}
<h2>Transfer Funds</h2>

<form method="POST">

<input name="amount" placeholder="Enter Amount (‚Çπ)" required>

<div class="eye">
<input id="pass4" type="password" name="txnpass" placeholder="Transaction Password" required>
<span onclick="togglePass('pass4')">üëÅ</span>
</div>

<button>Proceed to Authentication</button>
</form>

<div class="error">{{ error or "" }}</div>
{% endif %}


{% if page=="otp" %}
<h2>Two-Factor Authentication</h2>
<p style="font-size:13px;color:#94a3b8;">
Enter the 6-digit code from Google Authenticator
</p>

<form method="POST">
<input name="otp" placeholder="6-digit Code" required>
<button>Verify & Continue</button>
</form>

<div class="error">{{ error or "" }}</div>
{% endif %}


{% if page=="pay_api" %}
<h2>Confirm Payment</h2>
<p>Amount: ‚Çπ{{ amount }}</p>

<button id="pay-btn">Pay Securely</button>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
var options={
 "key":"{{ key_id }}",
 "amount":"{{ amount|int * 100 }}",
 "order_id":"{{ order_id }}",
 "handler":function(){
    window.location="/success";
 },
 "modal":{
  "ondismiss":function(){
    window.location="/payment_failed";
  }
 }
};

var rzp=new Razorpay(options);

document.getElementById('pay-btn').onclick=function(e){
 rzp.open();
 e.preventDefault();
}
</script>
{% endif %}


{% if page=="failed" %}
<h2 style="color:#f87171;">Payment Failed</h2>
<p>Please try again.</p>
<a href="/payment" style="color:#93c5fd;">Retry Payment</a>
{% endif %}


{% if page=="success" %}
<h2 class="success">Payment Successful</h2>

<p style="margin-top:15px;">Blockchain Transaction ID:</p>
<p style="font-size:12px;word-wrap:break-word;color:#93c5fd;">
{{ block_hash }}
</p>

<a href="/" style="color:#93c5fd;">Logout</a>
{% endif %}

</div>
</div>

<div class="footer">
¬© 2026 SecurePay Bank | Protected by 2FA & Blockchain
</div>

</body>
</html>
